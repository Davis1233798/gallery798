<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>éŠæˆ²å…¥å£ç¶²ç«™æ¸¬è©¦</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-result { padding: 10px; margin: 5px 0; border-radius: 5px; }
        .pass { background: #d4edda; color: #155724; }
        .fail { background: #f8d7da; color: #721c24; }
    </style>
</head>
<body>
    <h1>ğŸ® éŠæˆ²å…¥å£ç¶²ç«™æ¸¬è©¦</h1>
    <div id="test-results"></div>

    <script>
        // ç°¡å–®çš„æ¸¬è©¦æ¡†æ¶
        class TestRunner {
            constructor() {
                this.results = [];
                this.container = document.getElementById('test-results');
            }

            test(name, testFunc) {
                try {
                    const result = testFunc();
                    this.addResult(name, true, result);
                } catch (error) {
                    this.addResult(name, false, error.message);
                }
            }

            addResult(name, passed, message) {
                this.results.push({ name, passed, message });
                this.renderResult(name, passed, message);
            }

            renderResult(name, passed, message) {
                const div = document.createElement('div');
                div.className = `test-result ${passed ? 'pass' : 'fail'}`;
                div.innerHTML = `
                    <strong>${passed ? 'âœ…' : 'âŒ'} ${name}</strong>
                    ${message ? `<br><small>${message}</small>` : ''}
                `;
                this.container.appendChild(div);
            }

            summary() {
                const passed = this.results.filter(r => r.passed).length;
                const total = this.results.length;
                const div = document.createElement('div');
                div.className = `test-result ${passed === total ? 'pass' : 'fail'}`;
                div.innerHTML = `<strong>æ¸¬è©¦å®Œæˆ: ${passed}/${total} é€šé</strong>`;
                this.container.appendChild(div);
            }
        }

        // åŸ·è¡Œæ¸¬è©¦
        const runner = new TestRunner();

        runner.test('æª¢æŸ¥ HTML æ–‡ä»¶å­˜åœ¨', () => {
            return fetch('index.html').then(response => {
                if (!response.ok) throw new Error('ç„¡æ³•è¼‰å…¥ index.html');
                return 'index.html è¼‰å…¥æˆåŠŸ';
            });
        });

        runner.test('æª¢æŸ¥ CSS æ–‡ä»¶å­˜åœ¨', () => {
            return fetch('styles.css').then(response => {
                if (!response.ok) throw new Error('ç„¡æ³•è¼‰å…¥ styles.css');
                return 'styles.css è¼‰å…¥æˆåŠŸ';
            });
        });

        runner.test('æª¢æŸ¥ JavaScript æ–‡ä»¶å­˜åœ¨', () => {
            return fetch('script.js').then(response => {
                if (!response.ok) throw new Error('ç„¡æ³•è¼‰å…¥ script.js');
                return 'script.js è¼‰å…¥æˆåŠŸ';
            });
        });

        runner.test('æª¢æŸ¥éŠæˆ²è³‡æ–™åº«æ–‡ä»¶å­˜åœ¨', () => {
            return fetch('games-database.js').then(response => {
                if (!response.ok) throw new Error('ç„¡æ³•è¼‰å…¥ games-database.js');
                return 'games-database.js è¼‰å…¥æˆåŠŸ';
            });
        });

        runner.test('æª¢æŸ¥ PWA Manifest å­˜åœ¨', () => {
            return fetch('manifest.json').then(response => {
                if (!response.ok) throw new Error('ç„¡æ³•è¼‰å…¥ manifest.json');
                return 'manifest.json è¼‰å…¥æˆåŠŸ';
            });
        });

        runner.test('æª¢æŸ¥ Service Worker å­˜åœ¨', () => {
            return fetch('sw.js').then(response => {
                if (!response.ok) throw new Error('ç„¡æ³•è¼‰å…¥ sw.js');
                return 'sw.js è¼‰å…¥æˆåŠŸ';
            });
        });

        // ç­‰å¾…æ‰€æœ‰ç•°æ­¥æ¸¬è©¦å®Œæˆ
        setTimeout(() => {
            runner.summary();
        }, 2000);
    </script>
</body>
</html>